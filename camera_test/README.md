# Camera Test - SPRESENSEカメラテスト

## 概要

SPRESENSE + HDRカメラボードを使用したJPEG画像撮影のテストプロジェクトです。

## 機能

- HDRモード撮影対応
- JPEG形式で画像保存（1280x720 HD解像度）
- SDカードへの自動保存
- シリアル通信でトリガー撮影
- LED表示による撮影状態確認

## 必要なハードウェア

- SPRESENSE メインボード
- SPRESENSE 拡張ボード
- HDRカメラボード
- microSDカード（撮影画像保存用）

## ハードウェア接続

1. メインボードを拡張ボードに接続
2. HDRカメラボードをメインボードに接続
3. microSDカードを拡張ボードのSDスロットに挿入

## ビルドと書き込み

### PlatformIO CLIを使用する場合

```bash
cd camera_test
pio run --target upload
```

### PlatformIO IDE (VS Code) を使用する場合

1. VS Codeで`camera_test`フォルダを開く
2. PlatformIOのビルドボタンをクリック
3. アップロードボタンをクリック

## 使用方法

1. SPRESENSEをPCに接続
2. シリアルモニタを開く（115200 bps）
3. 起動メッセージを確認
4. シリアルモニタに任意の文字を送信すると撮影開始
5. 撮影された画像は`PICT000.JPG`, `PICT001.JPG`...として保存されます

## シリアル出力例

```
===================================
  SPRESENSE HDRカメラテスト
===================================

SDカードを初期化しています...
SDカードの初期化が完了しました
カメラを初期化しています...
HDRモード: 有効
カメラの初期化が完了しました
解像度: 1280x720 (HD)
フォーマット: JPEG

準備完了!
シリアルモニタに任意の文字を送信すると撮影します
-----------------------------------
撮影中...
保存中: PICT000.JPG
保存完了: PICT000.JPG (123456 bytes)
-----------------------------------
次の撮影待機中...
```

## トラブルシューティング

### SDカードが認識されない
- microSDカードが正しく挿入されているか確認
- microSDカードがFAT32でフォーマットされているか確認
- 別のmicroSDカードで試す

### カメラの初期化に失敗する
- HDRカメラボードの接続を確認
- カメラボードのフラットケーブルが正しく接続されているか確認
- SPRESENSEを再起動

### 撮影に失敗する
- カメラのレンズカバーが外れているか確認
- 十分な光量があるか確認

## コードの詳細

### 主要な関数

- `setupCamera()`: カメラの初期化とHDRモード設定
- `setupSD()`: SDカードの初期化
- `takePicture()`: 写真撮影とSDカードへの保存
- `setup()`: 初期設定
- `loop()`: メインループ（シリアル入力監視）

### カメラ設定

- **解像度**: 1280x720 (HD)
- **フォーマット**: JPEG
- **HDRモード**: 有効
- **保存先**: SDカード

## 次のステップ

このテストが正常に動作したら、次のプロジェクトに進みます：
- `display_test`: ILI9341ディスプレイのテスト
- `schlieren_camera`: シュリーレン撮影システムの統合

## ライセンス

TBD
