# Camera Test - PlatformIO ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ã‚¬ã‚¤ãƒ‰

## å‰ææ¡ä»¶

- Visual Studio Code ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨
- PlatformIO IDE æ‹¡å¼µæ©Ÿèƒ½ãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹ã“ã¨

## PlatformIO IDE ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

1. VS Codeã‚’èµ·å‹•
2. æ‹¡å¼µæ©Ÿèƒ½ï¼ˆExtensionsï¼‰ã‚’é–‹ãï¼ˆCtrl+Shift+Xï¼‰
3. "PlatformIO IDE" ã‚’æ¤œç´¢
4. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
5. VS Codeã‚’å†èµ·å‹•

## SPRESENSE ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

PlatformIOã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯SPRESENSEã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ãªã„ãŸã‚ã€æœ‰å¿—ãŒå…¬é–‹ã—ã¦ã„ã‚‹ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚

### ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«æ‰‹é †

#### æ–¹æ³•1: VS Codeå†…ã®PlatformIO Core CLIã‚’ä½¿ç”¨ï¼ˆæ¨å¥¨ï¼‰

1. **VS Codeã®å·¦å´ã®ã‚¢ã‚¯ãƒ†ã‚£ãƒ“ãƒ†ã‚£ãƒãƒ¼ã‚’ç¢ºèª**
   - PlatformIOã‚¢ã‚¤ã‚³ãƒ³ï¼ˆã‚¨ã‚¤ãƒªã‚¢ãƒ³ã®ã‚ˆã†ãªã‚¢ã‚¤ã‚³ãƒ³ï¼‰ãŒè¡¨ç¤ºã•ã‚Œã¦ã„ã‚‹ã¯ãšã§ã™
   - ã“ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯

2. **å·¦å´ãƒ‘ãƒãƒ«ã«ä»¥ä¸‹ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š**
   ```
   PlatformIO
   â”œâ”€ QUICK ACCESS
   â”‚  â”œâ”€ PIO Home
   â”‚  â”œâ”€ Open
   â”‚  â””â”€ Miscellaneous  â† ã“ã‚Œã‚’æ¢ã™
   â”œâ”€ PROJECT TASKS
   â””â”€ ...
   ```

3. **ã€ŒMiscellaneousã€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å±•é–‹**
   - ã€ŒMiscellaneousã€ã®å·¦ã«ã‚ã‚‹çŸ¢å°ï¼ˆâ–¶ï¼‰ã‚’ã‚¯ãƒªãƒƒã‚¯ã™ã‚‹ã¨å±•é–‹ã•ã‚Œã¾ã™
   - å±•é–‹ã™ã‚‹ã¨ä»¥ä¸‹ãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼š
     - New Terminal
     - **PlatformIO Core CLI** â† ã“ã‚Œã‚’ã‚¯ãƒªãƒƒã‚¯
     - ãã®ä»–ã®ã‚ªãƒ—ã‚·ãƒ§ãƒ³

4. **ã€ŒPlatformIO Core CLIã€ã‚’ã‚¯ãƒªãƒƒã‚¯**
   - VS Codeã®ä¸‹éƒ¨ã«TERMINALãƒ‘ãƒãƒ«ãŒé–‹ãã¾ã™
   - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆãŒè¡¨ç¤ºã•ã‚Œã¾ã™ï¼ˆä¾‹: `>` ã¾ãŸã¯ `$`ï¼‰

5. **ä»¥ä¸‹ã®ã‚³ãƒãƒ³ãƒ‰ã‚’å®Ÿè¡Œï¼š**
   ```bash
   pio pkg install -g -p https://github.com/maxgerhardt/platform-sonyspresense.git
   ```

6. **ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«å®Œäº†ã‚’å¾…ã¤**
   - åˆå›ã¯æ™‚é–“ãŒã‹ã‹ã‚Šã¾ã™ï¼ˆ5-10åˆ†ç¨‹åº¦ï¼‰
   - ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã¨ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®ãƒ­ã‚°ãŒè¡¨ç¤ºã•ã‚Œã¾ã™

#### æ–¹æ³•2: VS Codeå†…è”µã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ä½¿ç”¨

1. VS Codeã®ãƒ¡ãƒ‹ãƒ¥ãƒ¼ã‹ã‚‰ã€ŒTerminalã€â†’ã€ŒNew Terminalã€ã‚’é¸æŠï¼ˆã¾ãŸã¯ Ctrl+Shift+`ï¼‰
2. é–‹ã„ãŸã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã§ä»¥ä¸‹ã‚’å®Ÿè¡Œï¼š
   ```bash
   pio pkg install -g -p https://github.com/maxgerhardt/platform-sonyspresense.git
   ```

**æ³¨æ„**: PowerShellã‚„ã‚³ãƒãƒ³ãƒ‰ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚’å˜ç‹¬ã§é–‹ã„ã¦å®Ÿè¡Œã—ã¦ã‚‚ã‚¨ãƒ©ãƒ¼ã«ãªã‚Šã¾ã™ã€‚å¿…ãšVS Codeå†…ã®ã‚¿ãƒ¼ãƒŸãƒŠãƒ«ã‚’ä½¿ç”¨ã—ã¦ãã ã•ã„ã€‚

## ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®æº–å‚™

### 1. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ã

1. VS Codeã§ã€ŒFileã€â†’ã€ŒOpen Folderã€
2. `camera_test` ãƒ•ã‚©ãƒ«ãƒ€ã‚’é¸æŠ

### 2. PlatformIOãŒè‡ªå‹•çš„ã«ä¾å­˜é–¢ä¿‚ã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’é–‹ãã¨ã€PlatformIOãŒè‡ªå‹•çš„ã«ï¼š
- ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«ã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- å¿…è¦ãªãƒ©ã‚¤ãƒ–ãƒ©ãƒªã®ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
- ç’°å¢ƒã®æ§‹ç¯‰

ã‚’è¡Œã„ã¾ã™ã€‚åˆå›ã¯æ•°åˆ†ã‹ã‹ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚

### 3. ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ§‹é€ ã®ç¢ºèª

```
camera_test/
â”œâ”€â”€ platformio.ini     # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆè¨­å®š
â”œâ”€â”€ src/
â”‚   â””â”€â”€ main.cpp      # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ¼ãƒ‰
â”œâ”€â”€ include/          # ãƒ˜ãƒƒãƒ€ãƒ•ã‚¡ã‚¤ãƒ«ç”¨
â”œâ”€â”€ lib/              # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå°‚ç”¨ãƒ©ã‚¤ãƒ–ãƒ©ãƒªç”¨
â””â”€â”€ .gitignore
```

## ãƒ“ãƒ«ãƒ‰ã¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰

### VS Code ã® PlatformIO ãƒ„ãƒ¼ãƒ«ãƒãƒ¼

ç”»é¢ä¸‹éƒ¨ã«è¡¨ç¤ºã•ã‚Œã‚‹ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ã‹ã‚‰æ“ä½œã§ãã¾ã™ï¼š

| ã‚¢ã‚¤ã‚³ãƒ³ | æ©Ÿèƒ½ | ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ |
|---------|------|---------------|
| âœ“ | ãƒ“ãƒ«ãƒ‰ | Ctrl+Alt+B |
| â†’ | ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ | Ctrl+Alt+U |
| ğŸ—‘ï¸ | ã‚¯ãƒªãƒ¼ãƒ³ | Ctrl+Alt+C |
| ğŸ”Œ | ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ | Ctrl+Alt+S |

### æ‰‹é †

1. **ãƒ“ãƒ«ãƒ‰**: âœ“ï¼ˆãƒã‚§ãƒƒã‚¯ãƒãƒ¼ã‚¯ï¼‰ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
2. **ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: 
   - SPRESENSEã‚’PCã«æ¥ç¶š
   - â†’ï¼ˆçŸ¢å°ï¼‰ã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯
   - ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã®å ´åˆã¯è‡ªå‹•çš„ã«ãƒªã‚»ãƒƒãƒˆã•ã‚Œã¾ã™
3. **ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿**: ğŸ”Œã‚¢ã‚¤ã‚³ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦å‹•ä½œç¢ºèª

## platformio.ini ã®è¨­å®šå†…å®¹

### åŸºæœ¬è¨­å®š

```ini
[env:spresense]
platform = https://github.com/maxgerhardt/platform-sonyspresense.git
board = spresense
framework = arduino
monitor_speed = 115200
```

### Windowsç”¨ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚³ãƒãƒ³ãƒ‰

Python 3.10ä»¥é™ã§ã®å•é¡Œã‚’å›é¿ã™ã‚‹ãŸã‚ã€ãƒã‚¤ãƒŠãƒªç‰ˆã®flash_writerã‚’ä½¿ç”¨ï¼š

```ini
upload_command = ${platformio.packages_dir}/tool-spresense/flash_writer/windows/flash_writer -s -c $UPLOAD_PORT -b $UPLOAD_SPEED -d -n $SOURCE
```

### ãƒ©ã‚¤ãƒ–ãƒ©ãƒªä¾å­˜é–¢ä¿‚ã®æ¤œç´¢ãƒ¢ãƒ¼ãƒ‰

æ¡ä»¶ä»˜ãã‚³ãƒ³ãƒ‘ã‚¤ãƒ«ã«å¯¾å¿œã™ã‚‹ãŸã‚ï¼š

```ini
lib_ldf_mode = chain+
```

## ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼

**å•é¡Œ**: ãƒ©ã‚¤ãƒ–ãƒ©ãƒªãŒè¦‹ã¤ã‹ã‚‰ãªã„
```
Library Dependency Finder -> https://bit.ly/configure-pio-ldf
```

**è§£æ±ºç­–**: 
- `platformio.ini`ã«`lib_ldf_mode = chain+`ãŒè¨­å®šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
- PlatformIOã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã‚’å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«

### ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

**å•é¡Œ**: COMãƒãƒ¼ãƒˆãŒè¦‹ã¤ã‹ã‚‰ãªã„
```
Could not open serial port
```

**è§£æ±ºç­–**:
1. SPRESENSEãŒæ­£ã—ãæ¥ç¶šã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. ãƒ‡ãƒã‚¤ã‚¹ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼ã§COMãƒãƒ¼ãƒˆç•ªå·ã‚’ç¢ºèª
3. ä»–ã®ã‚¢ãƒ—ãƒªï¼ˆArduino IDEãªã©ï¼‰ã§ã‚·ãƒªã‚¢ãƒ«ãƒãƒ¼ãƒˆã‚’ä½¿ç”¨ã—ã¦ã„ãªã„ã‹ç¢ºèª

**å•é¡Œ**: ãƒ–ãƒ¼ãƒˆãƒ­ãƒ¼ãƒ€ãƒ¼ãƒ¢ãƒ¼ãƒ‰ã«å…¥ã‚‰ãªã„

**è§£æ±ºç­–**:
1. BOOTãƒœã‚¿ãƒ³ã‚’æŠ¼ã—ãªãŒã‚‰ãƒªã‚»ãƒƒãƒˆ
2. ã¾ãŸã¯ã€USBã‚±ãƒ¼ãƒ–ãƒ«ã‚’æŠœãå·®ã—

### Linux/Mac ã§ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚¨ãƒ©ãƒ¼

**å•é¡Œ**: ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ„ãƒ¼ãƒ«ã®å®Ÿè¡Œæ¨©é™ãŒãªã„

**è§£æ±ºç­–**:
```bash
# Linux
chmod +x ~/.platformio/packages/tool-spresense/flash_writer/linux/flash_writer

# Mac
chmod +x ~/.platformio/packages/tool-spresense/flash_writer/macosx/flash_writer
```

`platformio.ini`ã®upload_commandã‚‚å¤‰æ›´ãŒå¿…è¦ï¼š
```ini
# Linux
upload_command = ${platformio.packages_dir}/tool-spresense/flash_writer/linux/flash_writer -s -c $UPLOAD_PORT -b $UPLOAD_SPEED -d -n $SOURCE

# Mac
upload_command = ${platformio.packages_dir}/tool-spresense/flash_writer/macosx/flash_writer -s -c $UPLOAD_PORT -b $UPLOAD_SPEED -d -n $SOURCE
```

## æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

1. ãƒ“ãƒ«ãƒ‰ãŒæˆåŠŸã™ã‚‹ã“ã¨ã‚’ç¢ºèª
2. SPRESENSEã«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¦å‹•ä½œç¢ºèª
3. ã‚·ãƒªã‚¢ãƒ«ãƒ¢ãƒ‹ã‚¿ã§å‡ºåŠ›ã‚’ç¢ºèª
4. å®Ÿéš›ã«ã‚«ãƒ¡ãƒ©ã§æ’®å½±ãƒ†ã‚¹ãƒˆ

è©³ç´°ãªä½¿ç”¨æ–¹æ³•ã¯ [README.md](README.md) ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

## å‚è€ƒãƒªãƒ³ã‚¯

- [PlatformIOå…¬å¼ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://docs.platformio.org/)
- [SPRESENSEç”¨PlatformIOãƒ‘ãƒƒã‚±ãƒ¼ã‚¸](https://github.com/maxgerhardt/platform-sonyspresense)
- [PlatformIOã§Spresenseé–‹ç™º](https://elchika.com/article/719945f0-4a66-45a2-a96a-e2a79513af41/)
